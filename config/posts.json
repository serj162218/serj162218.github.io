{
  "posts": [
    {
      "content": "###### tags: `leetcode`\r\n\r\n[74. Search a 2D Matrix](https://leetcode.com/problems/search-a-2d-matrix/)\r\n\r\nIntroduce:\r\n> Write an efficient algorithm that searches for a value target in an m x n integer matrix matrix. This matrix has the following properties:\r\n> - Integers in each row are sorted from left to right.\r\n> - The first integer of each row is greater than the last integer of the previous row.\r\n\r\n\r\nExample 1:\r\n\r\n> Input: matrix = [[1,3,5,7],[10,11,16,20], [23,30,34,60]], target = 3\r\n> Output: true\r\n\r\nExample 2:\r\n\r\n> Input: matrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 13\r\n> Output: false\r\n\r\n \r\n\r\nConstraints:\r\n> - m == matrix.length\r\n> - n == matrix[i].length\r\n> - 1 <= m, n <= 100\r\n> - -104 <= matrix[i][j], target <= 104\r\n\r\n\r\n---\r\n\r\ntips:\r\n> - The last integer in every row is always less than the next row's first integer.\r\n> - Because m and n could be a very big number, it's not a nice option to search every row and column (O(m\\*n))\r\n> - By the first tip, compare the first element in every row, then search the row which is the most possible with target.\r\n> - The time complexity is O(logn) because it will execute at most two binary search.\r\n\r\n```javascript=\r\nlet searchMatrix = (matrix, target) => {\r\n    let L = 0, R = matrix.length - 1;\r\n    let M;\r\n    while (L < R) {\r\n        M = ~~((L + R) / 2);\r\n        if (M > 0 && matrix[M][0] > target && matrix[M - 1][0] < target) return searchValue(matrix[M - 1], target);\r\n        else if (M < matrix.length - 1 && matrix[M][0] < target && matrix[M + 1][0] > target) return searchValue(matrix[M], target);\r\n\r\n        if (matrix[M][0] > target) R = M;\r\n        else if (matrix[M][0] < target) L = M + 1;\r\n        else return searchValue(matrix[M], target);\r\n    }\r\n    return searchValue(matrix[R], target);\r\n};\r\n\r\nlet searchValue = (arr, target) => {\r\n    if (arr.length < 2) return arr[0] == target ? true : false;\r\n    let L = 0, R = arr.length - 1;\r\n    let M;\r\n    while (L < R) {\r\n        M = ~~((L + R) / 2);\r\n        if (arr[M] > target) R = M - 1;\r\n        else if (arr[M] < target) L = M + 1;\r\n        else return true;\r\n    }\r\n    return arr[R] == target ? true : false;\r\n}\r\n```",
      "data": {
        "title": "74. Search a 2D Matrix",
        "date": "2022-12-26 15:00:45",
        "tags": [
          "leetcode"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "74-search-a-2d-matrix"
    },
    {
      "content": "## Introduce\r\nMake a simple todolist with below.\r\n- Express\r\n- Typescript\r\n- Prisma\r\n- gulp\r\n- ejs\r\n\r\napp(router)\r\n    - app.ts\r\n    - config.ts\r\n    - todo.ts\r\nprisma(orm)\r\n    - schema.prisma\r\nviews\r\n    - index.ejs\r\n    - todo.ejs\r\ngulpfile.js\r\n\r\n---\r\n\r\n## Database structure\r\n![](https://i.imgur.com/QH9BsIg.png)\r\n\r\n---\r\n\r\n## Code\r\n\r\n### app.ts\r\n```typescript=\r\nimport express from 'express';\r\nimport path from 'path';\r\n//router from todo, separate them for scalability in future.\r\nimport { todo } from './todo';\r\n\r\nconst app = express();\r\n\r\n//view engine\r\napp.set('view engine', 'ejs');\r\n\r\n//bodyEncoder, using for POST from form\r\napp.use(express.json());\r\napp.use(express.urlencoded({\r\n    extended: true\r\n}));\r\n\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n//include todo's router\r\napp.use('/', todo);\r\n\r\n//index\r\napp.get('/', async (req, res) => {\r\n    res.redirect('/todo');\r\n});\r\n\r\n//listening\r\napp.listen(3000, () => {\r\n    console.log(\"listening port on 3000.\");\r\n})\r\n```\r\n### config.ts\r\n```typescript=\r\nimport { PrismaClient } from '@prisma/client'\r\nconst database = new PrismaClient();\r\n\r\nexport { database };\r\n```\r\n### todo.ts\r\n```typescript=\r\nimport express from 'express';\r\nimport { database } from './config';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get('/todo', async (req, res) => {\r\n    res.render('index');\r\n});\r\n\r\n//Separate front-end and backend\r\nrouter.get('/loadTodolist', async (req, res) => {\r\n    const todolist = await database.todolist.findMany();\r\n    res.json(todolist);\r\n})\r\n\r\nrouter.get('/todo/:id', async (req, res) => {\r\n    res.render('todo');\r\n});\r\n\r\n//API for ajax\r\nrouter.get('/loadTasks/:id', async (req, res) => {\r\n    //load all the tasks which are belong to this id's todolist\r\n    const tasks = await database.todolist.findUnique(\r\n        {\r\n            where: { id: parseInt(req.params.id) },\r\n            include: {\r\n                taskrelations:\r\n                {\r\n                    include: { taskdetails: true }\r\n                }\r\n            }\r\n        }\r\n    );\r\n    res.json(tasks);\r\n});\r\n\r\nrouter.post('/addTodo', async (req, res) => {\r\n    const name = req.body.name;\r\n    console.log(name);\r\n    const createTodolist = await database.todolist.create({\r\n        data: {\r\n            name: name,\r\n        }\r\n    });\r\n    res.json(createTodolist);\r\n});\r\n\r\n//create a new task, will also create a task's relation, Prisma is useful btw.\r\nrouter.post('/todo/:id', async (req, res) => {\r\n    const id = req.params.id;\r\n    const task = await database.taskdetails.create({\r\n        data: {\r\n            name: req.body.name,\r\n            finished: false,\r\n            taskrelations: {\r\n                create: [\r\n                    { todolist: { connect: { id: parseInt(id) } }, },\r\n                ]\r\n            }\r\n        }\r\n    });\r\n    res.json(task);\r\n});\r\n\r\n//delete the task and the task relations at the same time.\r\nrouter.delete('/todo', async (req, res) => {\r\n    const taskid = parseInt(req.body.id);\r\n\r\n    await database.taskdetails.delete({\r\n        where: {\r\n            id: taskid\r\n        },\r\n        include: {\r\n            taskrelations: true\r\n        }\r\n    });\r\n    res.sendStatus(200);\r\n});\r\n\r\n//update the task's \"finished\" attribute\r\nrouter.patch('/todo', async (req, res) => {\r\n    const taskid = parseInt(req.body.id);\r\n    const checked = req.body.checked === \"true\" ? true : false;\r\n    await database.taskdetails.update({\r\n        where: {\r\n            id: taskid\r\n        },\r\n        data: {\r\n            finished: checked\r\n        }\r\n    });\r\n    res.sendStatus(200);\r\n});\r\n\r\nexport { router as todo }\r\n```\r\n### schema.prisma\r\n```javascript=\r\n/*\r\n * Prisma generate a model relations by using command.\r\n * I'm using mysql in this project, if you use sqlite or others, remember to change the latest word.\r\n * Remember to set the settings in .env which is created by prisma itself.\r\n * npx prisma init --datasource-provider mysql\r\n * npx prisma db pull\r\n * npx prisma generate\r\n * \r\n */\r\ngenerator client {\r\n  provider = \"prisma-client-js\"\r\n}\r\n\r\ndatasource db {\r\n  provider = \"mysql\"\r\n  url      = env(\"DATABASE_URL\")\r\n}\r\n\r\nmodel taskdetails {\r\n  id            Int             @id @default(autoincrement())\r\n  name          String          @db.VarChar(100)\r\n  finished      Boolean\r\n  createdAt     DateTime        @default(now()) @db.DateTime(0)\r\n  updatedAt     DateTime        @default(now()) @db.DateTime(0)\r\n  taskrelations taskrelations[]\r\n}\r\n\r\n//I add foreign key in data table, it will automatic create by itself when I use command.\r\nmodel taskrelations {\r\n  id          Int         @id @default(autoincrement())\r\n  task_id     Int\r\n  list_id     Int\r\n  todolist    todolist    @relation(fields: [list_id], references: [id], onDelete: Cascade, map: \"foreign_list\")\r\n  taskdetails taskdetails @relation(fields: [task_id], references: [id], onDelete: Cascade, map: \"foreign_task\")\r\n\r\n  @@index([list_id], map: \"foreign_list\")\r\n  @@index([task_id], map: \"foreign_task\")\r\n}\r\n\r\nmodel todolist {\r\n  id            Int             @id @default(autoincrement())\r\n  name          String          @db.VarChar(50)\r\n  taskrelations taskrelations[]\r\n}\r\n```\r\n### index.ejs\r\n```javascript=\r\n<script src=\"https://code.jquery.com/jquery-3.6.1.min.js\"\r\n    integrity=\"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=\" crossorigin=\"anonymous\"></script>\r\n\r\n<body>\r\n    <input type=\"text\" id=\"todolistName\" placeholder=\"todolist-name\">\r\n    <button id=\"addTodolistBtn\">new Todolist</button>\r\n    <ul id=\"todolist\">\r\n    </ul>\r\n</body>\r\n<script>\r\n    let addTodolist = () => {\r\n        let name = $(\"#todolistName\").val();\r\n        if ($.trim(name) == '') {\r\n            alert(\"todolist's name cannot be empty.\");\r\n            return false;\r\n        }\r\n        $.ajax({\r\n            url: \"./addTodo\",\r\n            data: { name },\r\n            method: \"POST\",\r\n            dataType: \"json\"\r\n        }).done(rs => {\r\n            let e = $(\"<a>\", { href: `./todo/${rs.id}`, text: rs.name });\r\n            e = $(\"<h1>\").append(e);\r\n            e = $(\"<li>\").append(e);\r\n            $(\"#todolist\").append(e);\r\n        }).fail(rs => console.error(rs));\r\n    }\r\n\r\n    let loadTodolist = () => {\r\n        $.ajax({\r\n            url: \"./loadTodolist\",\r\n            method: \"GET\",\r\n            dataType: \"json\"\r\n        }).done(rs => {\r\n            rs.forEach(element => {\r\n                let e = $(\"<a>\", { href: `./todo/${element.id}`, text: element.name });\r\n                e = $(\"<h1>\").append(e);\r\n                e = $(\"<li>\").append(e);\r\n                $(\"#todolist\").append(e);\r\n            });\r\n        }).fail(rs => console.error(rs));\r\n    }\r\n\r\n    $(\"body\").ready(() => {\r\n        loadTodolist();\r\n        $(\"body\").on(\"click\", \"#addTodolistBtn\", addTodolist);\r\n    })\r\n</script>\r\n```\r\n### todo.ejs\r\n```javascript=\r\n<script src=\"https://code.jquery.com/jquery-3.6.1.min.js\"\r\n    integrity=\"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=\" crossorigin=\"anonymous\"></script>\r\n\r\n<body>\r\n    <a href=\"/todo\">Index</a>\r\n    <h1 id=\"todolist-name\"></h1>\r\n    <ol id=\"task-container\">\r\n    </ol>\r\n    <form method=\"post\">\r\n        name: <input name=\"name\" id=\"taskName\">\r\n        <button type=\"button\" id=\"submitBtn\">submit</button>\r\n    </form>\r\n</body>\r\n<script>\r\n    let todoID = new URL(location.href).pathname.split('/')[2];\r\n    let loadTasks = () => {\r\n        if (!todoID.match(/\\d/)) return;\r\n\r\n        $.ajax({\r\n            url: `/loadTasks/${todoID}`,\r\n            method: \"GET\",\r\n            dataType: \"json\",\r\n        }).done(rs => {\r\n            $(\"#todolist-name\").text(rs.name);\r\n            rs['taskrelations'].forEach(task => {\r\n                let e = $(\"<span>\", { text: task.taskdetails.name });\r\n                let btn = $(\"<button>\", { class: 'deleteTaskBtn', text: 'x', \"d-id\": task.taskdetails.id });\r\n                let checkbox = $(\"<input>\", { type: 'checkbox', class: 'checkTaskBtn', \"d-id\": task.taskdetails.id, \"checked\": task.taskdetails.finished });\r\n                \r\n                e = $(\"<li>\", { \"d-id\": task.taskdetails.id }).append(btn, e, checkbox);\r\n                $(\"#task-container\").append(e);\r\n            });\r\n        }).fail(rs => console.error(rs));\r\n    }\r\n\r\n    let addTask = (e) => {\r\n        if (!todoID.match(/\\d/)) return;\r\n\r\n        let name = $(\"#taskName\").val();\r\n        if ($.trim(name) == '') {\r\n            alert(\"task's name cannot be empty.\");\r\n            return false;\r\n        }\r\n        $.ajax({\r\n            url: `/todo/${todoID}`,\r\n            data: { name },\r\n            method: \"POST\",\r\n            dataType: \"json\"\r\n        }).done(task => {\r\n            let e = $(\"<span>\", { text: task.name });\r\n            let btn = $(\"<button>\", { class: 'deleteTaskBtn', text: 'x', \"d-id\": task.id });\r\n            let checkbox = $(\"<input>\", { type: 'checkbox', class: 'checkTaskBtn', \"d-id\": task.id, \"checked\": task.finished });\r\n\r\n            e = $(\"<li>\", { \"d-id\": task.id }).append(btn, e, checkbox);\r\n            $(\"#task-container\").append(e);\r\n        }).fail(rs => console.error(rs));\r\n    }\r\n\r\n    let deleteTask = (e) => {\r\n        let id = $(e.target).attr('d-id');\r\n        $.ajax({\r\n            url: `/todo`,\r\n            data: { id },\r\n            method: \"DELETE\",\r\n            dataType: \"text\"\r\n        }).done(rs => {\r\n            $(\"#task-container\").find(`li[d-id=${id}]`).remove();\r\n        }).fail(rs => console.error(rs));\r\n    }\r\n\r\n    let checkTask = (e) => {\r\n        let id = $(e.target).attr('d-id');\r\n        let checked = $(e.target).is(\":checked\");\r\n        console.log(checked);\r\n        $.ajax({\r\n            url: `/todo`,\r\n            data: { id, checked },\r\n            method: \"PATCH\",\r\n            dataType: \"text\"\r\n        }).done(rs => {\r\n\r\n        }).fail(rs => console.error(rs));\r\n    }\r\n\r\n    $(\"body\").ready(() => {\r\n        loadTasks();\r\n        $(\"body\").on(\"click\", \"#submitBtn\", addTask);\r\n        $(\"body\").on(\"click\", \".deleteTaskBtn\", deleteTask);\r\n        $(\"body\").on(\"change\", \".checkTaskBtn\", checkTask);\r\n    })\r\n\r\n</script>\r\n```\r\n### gulpfile.js\r\n```javascript=\r\n/*\r\n * use gulp to automatic refresh when the code changed.\r\n */\r\nvar gulp = require('gulp');\r\nconst nodemon = require('gulp-nodemon');\r\nconst express = require('gulp-express');\r\n\r\ngulp.task('webserver', function () {\r\n    nodemon({\r\n        script: './app/app.ts',\r\n    });\r\n\r\n    //when below's code changed, refresh the task.\r\n    gulp.watch('./app/*.ts', express.notify);\r\n    gulp.watch('./app/view/*.html', express.notify);\r\n});\r\n\r\n//use command -> \"gulp serve\" to start the task\r\ngulp.task('serve', gulp.series('webserver'));\r\n```",
      "data": {
        "title": "Todolist Example(Javascript + Web Application)",
        "date": "2022-12-14 11:28:01",
        "tags": [
          "javascript"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "todolist-examplejavascript-web-application"
    },
    {
      "content": "###### tags: `leetcode`\r\n\r\n[22. Generate Parentheses](https://leetcode.com/problems/generate-parentheses/)\r\n\r\nIntroduce:\r\n> Given n pairs of parentheses, write a function to generate all combinations of well-formed parentheses.\r\n\r\nExample 1:\r\n\r\n> Input: n = 3\r\n> Output: [\"((()))\",\"(()())\",\"(())()\",\"()(())\",\"()()()\"]\r\n\r\nExample 2:\r\n\r\n> Input: n = 1\r\n> Output: [\"()\"]\r\n\r\n \r\n\r\n> Constraints:\r\n>     1 <= n <= 8\r\n\r\n---\r\n\r\ntips:\r\n* Because n defined the amount of pairs, n\\*2 is equal to the string's length.\r\n* The left parenthesis amount is always equal or bigger than the right parenthesis amount.\r\n* Using dfs to try every sets which is in the condition above.\r\n\r\n```javascript=\r\nvar generateParenthesis = function (n) {\r\n    let dfs = (n, str, open, close) => {\r\n        if (str.length === n * 2) {\r\n            ans.push(str);\r\n            return true;\r\n        }\r\n\r\n        if (open < n)\r\n            dfs(n, str + \"(\", open + 1, close);\r\n\r\n        if (open > close)\r\n            dfs(n, str + \")\", open, close + 1);\r\n\r\n    }\r\n    let ans = [];\r\n    dfs(n, \"\", 0, 0);\r\n    return ans;\r\n};\r\n```",
      "data": {
        "title": "22. Generate Parentheses",
        "date": "2022-12-09 14:15:59",
        "tags": [
          "leetcode"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "22-generate-parentheses"
    },
    {
      "content": "###### tags: `leetcode`\r\n\r\n[150. Evaluate Reverse Polish Notation](https://leetcode.com/problems/evaluate-reverse-polish-notation/description/)\r\n\r\nintroduce:\r\nEvaluate the value of an arithmetic expression in Reverse Polish Notation.\r\n\r\nValid operators are +, -, *, and /. Each operand may be an integer or another expression.\r\n\r\nNote that division between two integers should truncate toward zero.\r\n\r\nIt is guaranteed that the given RPN expression is always valid. That means the expression would always evaluate to a result, and there will not be any division by zero operation.\r\n\r\nExample 1:\r\n> Input: tokens = [\"2\",\"1\",\"+\",\"3\",\"*\"]\r\n> Output: 9\r\n> Explanation: ((2 + 1) * 3) = 9\r\n\r\nExample 2:\r\n\r\n> Input: tokens = [\"4\",\"13\",\"5\",\"/\",\"+\"]\r\n> Output: 6\r\n> Explanation: (4 + (13 / 5)) = 6\r\n\r\nExample 3:\r\n\r\n> Input: tokens = [\"10\",\"6\",\"9\",\"3\",\"+\",\"-11\",\"*\",\"/\",\"*\",\"17\",\"+\",\"5\",\"+\"]\r\n> Output: 22\r\n> Explanation: ((10 * (6 / ((9 + 3) * -11))) + 17) + 5\r\n> = ((10 * (6 / (12 * -11))) + 17) + 5\r\n> = ((10 * (6 / -132)) + 17) + 5\r\n> = ((10 * 0) + 17) + 5\r\n> = (0 + 17) + 5\r\n> = 17 + 5\r\n> = 22\r\n\r\n---\r\n![](https://i.imgur.com/SLOKPY4.png)\r\n\r\n```javascript=\r\nvar evalRPN = function (tokens) {\r\n    let numArr = [];\r\n    for (let i of tokens) {\r\n        switch (i) {\r\n            case \"+\":\r\n                numArr.push(parseInt(numArr.pop() + numArr.pop()));\r\n                break;\r\n            case \"-\":\r\n                //[3,4] => 3-4 => -4+3 = -1\r\n                numArr.push(parseInt(-numArr.pop() + numArr.pop()));\r\n                break;\r\n            case \"*\":\r\n                numArr.push(parseInt(numArr.pop() * numArr.pop()));\r\n                break;\r\n            case \"/\":\r\n                //[2,5]=>2/5, so we need to use variable.\r\n                let numB = numArr.pop();\r\n                let numA = numArr.pop();\r\n                //not using Math.floor() because 1/(-2) = -1, not we want.\r\n                numArr.push(parseInt(numA / numB));\r\n                break;\r\n            default:\r\n                numArr.push(parseInt(i));\r\n                break;\r\n        }\r\n    }\r\n    return numArr[0];\r\n};\r\n```",
      "data": {
        "title": "150. Evaluate Reverse Polish Notation",
        "date": "2022-12-08 14:17:54",
        "tags": [
          "leetcode"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "150-evaluate-reverse-polish-notation"
    },
    {
      "content": "###### tags: `leetcode`\r\n\r\n[155. Min Stack](https://leetcode.com/problems/min-stack/description/)\r\n\r\nintroduce:\r\nDesign a stack that supports push, pop, top, and retrieving the minimum element in constant time.\r\n\r\nImplement the MinStack class:\r\n\r\n    MinStack() initializes the stack object.\r\n    void push(int val) pushes the element val onto the stack.\r\n    void pop() removes the element on the top of the stack.\r\n    int top() gets the top element of the stack.\r\n    int getMin() retrieves the minimum element in the stack.\r\n\r\nYou must implement a solution with O(1) time complexity for each function.\r\n\r\nExample 1:\r\n\r\n> Input\r\n> [\"MinStack\",\"push\",\"push\",\"push\",\"getMin\",\"pop\",\"top\",\"getMin\"]\r\n> [[],[-2],[0],[-3],[],[],[],[]]\r\n> \r\n> Output\r\n> [null,null,null,null,-3,null,0,-2]\r\n> \r\n> Explanation\r\n> MinStack minStack = new MinStack();\r\n> minStack.push(-2);\r\n> minStack.push(0);\r\n> minStack.push(-3);\r\n> minStack.getMin(); // return -3\r\n> minStack.pop();\r\n> minStack.top();    // return 0\r\n> minStack.getMin(); // return -2\r\n\r\n---\r\n\r\nThis question's point is below\r\n- The time complexity must in O(1).\r\n- It need to remember the minimum value in the stack.\r\n- While popping the value, it can't be scanned again to get the minimum value, so the minimum value must be remembered while pushing.\r\n\r\nI'm using a new constructor call \"Node\" to remember the minimum value for every node.\r\nThis stack is seems like a LinkedList.\r\n```javascript=\r\nclass Node {\r\n    constructor(val, min, next) {\r\n        this.val = val;\r\n        this.min = min;\r\n        this.next = next;\r\n    }\r\n}\r\nclass MinStack {\r\n    constructor() {\r\n        this.head = new Node(null, null, null);\r\n    }\r\n    /**\r\n     * @param {number} val\r\n     * @return {void}\r\n     */\r\n    push(val) {\r\n        this.head = new Node(val, Math.min(val, this.head.min===null?val:this.head.min), this.head);\r\n    }\r\n    /**\r\n     * @return {void}\r\n     */\r\n    pop() {\r\n        this.head = this.head.next;\r\n    }\r\n    /**\r\n     * @return {number}\r\n     */\r\n    top() {\r\n        return this.head.val;\r\n    }\r\n    /**\r\n     * @return {number}\r\n     */\r\n    getMin() {\r\n        return this.head.min;\r\n    }\r\n}\r\n```\r\n\r\n![](https://i.imgur.com/1f00igh.png)\r\n",
      "data": {
        "title": "155. Min Stack",
        "date": "2022-12-07 14:46:54",
        "tags": [
          "leetcode"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "155-min-stack"
    },
    {
      "content": "###### tags: `leetcode`\r\n\r\n[416.partition-equal-subset-sum](https://leetcode.com/problems/partition-equal-subset-sum/description/)\r\n\r\nintroduce:\r\nGiven a non-empty array nums containing only positive integers, find if the array can be partitioned into two subsets such that the sum of elements in both subsets is equal.\r\n\r\nExample 1:\r\n> Input: nums = [1,5,11,5]\r\n> Output: true\r\n> Explanation: The array can be partitioned as [1, 5, 5] and [11].\r\n\r\nExample 2:\r\n\r\n> Input: nums = [1,2,3,5]\r\n> Output: false\r\n> Explanation: The array cannot be partitioned into equal sum subsets.\r\n\r\n---\r\n\r\nBecause the array with be partitioned into two parts, we only need to find the target which is sum(nums)/2.\r\n> note: sum(nums) is always a even number.\r\n\r\nThen there's two way:\r\n1. \r\n![](https://i.imgur.com/nHqlPIQ.png)\r\n\r\n\r\n2. \r\n![](https://i.imgur.com/FnOz6Gg.png)\r\n\r\n---\r\n\r\n1. Set, not efficient.\r\n![](https://i.imgur.com/vWkJlUc.png)\r\n\r\n\r\n```javascript=\r\nvar canPartition = function (nums) {\r\n    let sum = nums.reduce((a, b) => a + b);\r\n    if (sum % 2 == 1) return false;\r\n    \r\n    let target = sum / 2;\r\n    let dp = new Set();\r\n    \r\n    dp.add(0);\r\n    \r\n    for (let i = 0; i < nums.length; i++) {\r\n        let nextDP = new Set(dp);\r\n        \r\n        for (let j of new Set(nextDP)) {\r\n            if (j + nums[i] > target) continue;\r\n            if (j + nums[i] === target) return true;\r\n            nextDP.add(j + nums[i]);\r\n        }\r\n        dp = nextDP;\r\n    }\r\n    \r\n    return dp.has(target) ? true : false;\r\n};\r\n```\r\n\r\n2. Array, still not efficient.\r\n> Similar with using set\r\n> Because using array will iterate every element, so it must add if(dp[key] === true)\r\n> Still not good because the loop at Line.11, array need to deep copy before it.\r\n```javascript=\r\nvar canPartition = function (nums) {\r\n    let sum = nums.reduce((a, b) => a + b);\r\n    if (sum % 2 == 1) return false;\r\n\r\n    let target = sum / 2;\r\n    let dp = Array(target + 1).fill(false);\r\n\r\n    dp[0] = true;\r\n    for (let i = 0; i < nums.length; i++) {\r\n        let nextDP = [...dp];\r\n        for (let key = 0; key < nextDP.length; key++) {\r\n            if (dp[key] === true) {\r\n                nextDP[parseInt(key) + nums[i]] = true;\r\n            }\r\n        }\r\n        dp = nextDP;\r\n    }\r\n    return dp[target] === true;\r\n};\r\n```\r\n\r\n\r\n3. Array (the most efficiently )\r\n\r\n> Line 10: using j is start at target, the idea is to fix the problem below(need to copy every time before it starting to loop)\r\n> j is always need to bigger than nums[i] so it won't be negative.\r\n![](https://i.imgur.com/RVk32Om.png)\r\n\r\n```javascript=\r\nvar canPartition = function (nums) {\r\n    let sum = nums.reduce((a, b) => a + b);\r\n    if (sum % 2 == 1) return false;\r\n\r\n    let target = sum / 2;\r\n    let dp = Array(target + 1).fill(false);\r\n\r\n    dp[0] = true;\r\n    for (let i = 0; i < nums.length; i++) {\r\n        for (let j = target; j >= nums[i]; j--) {\r\n            dp[j] = dp[j - nums[i]] || dp[j];\r\n        }\r\n        if (dp[target] === true) return true;\r\n    }\r\n    return dp[target] === true;\r\n};\r\n```\r\n\r\n---\r\n\r\n1. using Set (Slower than using Array, because by using iterator, it need to deep copy the set first. By doing this, when it is iterating, the origin set won't be effected.)\r\n![](https://i.imgur.com/T8PUAZL.png)\r\n\r\n```javascript=\r\nvar canPartition = function (nums) {\r\n    let sum = nums.reduce((a, b) => a + b);\r\n    if (sum % 2 == 1) return false;\r\n\r\n    let target = sum / 2;\r\n    let dp = new Set();\r\n\r\n    dp.add(target);\r\n\r\n    for (let i of nums) {\r\n        let nextDP = dp;\r\n        for (let j of new Set(nextDP)) {\r\n            if (j >= i)\r\n                nextDP.add(j - i);\r\n        }\r\n        if (dp.has(0)) return true;\r\n    }\r\n    return dp.has(0);\r\n};\r\n```",
      "data": {
        "title": "416.partition-equal-subset-sum",
        "date": "2022-12-07 11:09:45",
        "tags": [
          "leetcode"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "416partition-equal-subset-sum"
    },
    {
      "content": "```javascript=\r\n/**\r\n * Three order method in tree\r\n * the key is \"arr.push(node.val)\"\r\n * preorder = do the things first.\r\n * inorder = do it in the middle.\r\n * postorder = do it last.\r\n * \r\n * This example is postorder\r\n */\r\nvar OrderTraversal = function (root) {\r\n    let arr = [];\r\n    let helper = function (node) {\r\n        if (!node) { return false; }\r\n        helper(node.left);\r\n        helper(node.right);\r\n        arr.push(node.val);\r\n    }\r\n    helper(root);\r\n    return arr;\r\n};\r\n```",
      "data": {
        "title": "Three types of Order in Binary Tree with Javascript ( Recursion )",
        "date": "2022-11-07 16:59:26",
        "tags": [
          "program"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "three-types-of-order-in-binary-tree-with-javascript-recursion"
    },
    {
      "content": "insert mode\r\ni\r\nnormal\r\nesc\r\n左下上右\r\nh j k l\r\n移動到下個單字\r\nw\r\n移動到此字的首\r\nb\r\n移動到此字的尾\r\ne\r\n\r\n數字+指令 = 重複指令三次\r\n3h -> 往左三下 3w -> 跳三次下個單字\r\n\r\ninsert mode也能配數字\r\n3igo esc -> gogogo\r\n30i- esc -> 30個-\r\n\r\n找下(上)個字，可以配數字 (單行搜尋)\r\nf F\r\nfo -> 找下個o\r\nFo -> 找上個o\r\n3fq -> 往下找第三個q\r\n\r\n找( { [ 配對的括弧\r\n%\r\n\r\n到句子首尾\r\n0 $\r\n\r\n跳到這個字的下(上)個地方 例如在the用*就會到下個the\r\n* #\r\n\r\n到檔案一開始(最後面)\r\ngg G\r\n\r\n到特定的行數 行數+G\r\n2G -> 第二行\r\n\r\n搜尋字 (往下 往上)\r\n/ n N\r\n例如 / text 搜尋text 然後往下(n)\r\n\r\ninsert new line(往下 往上) 會變insert mode\r\no O\r\n\r\ndelete word\r\nx X\r\n\r\nreplace one word\r\nr + 要的字\r\n\r\ndelete command\r\nd\r\ndw 刪掉下個單字\r\np可以貼上刪掉的字\r\nd2e 可以配數字刪掉兩個字\r\n\r\n重複上個指令\r\n.\r\nd2w後用 . 可以一直執行 d2w\r\n\r\nvisual mode (選取模式)\r\nv\r\nex: v + e + l + d 刪掉目前這個字\r\n\r\n:w (save) :q (quit) :q! (quit without saving)\r\n\r\nu undo ctrl + R redo",
      "data": {
        "title": "vim 指南",
        "date": "2022-11-01 12:07:57",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "vim-zhi-nan"
    },
    {
      "content": "<h1>遞迴版本</h1>\r\n從0,0開始往四個方向走，用一個array去存現在走哪個方向\r\n如果碰到終點(maze.length-1 && maze.length -1)就代表成功了\r\n如果有一條遞迴的路成功了，就一直把這成功的訊息傳下去\r\n如果這條路失敗了，就把array剛剛存的「現在走的方向」移除掉\r\n最後輸出array就是答案了\r\n在走的時候，下一步不能是原點，也不能超出範圍\r\n\r\n<h1>Recursion</h1>\r\nStart with (0,0) (you can start with any point)\r\nThere must be a way to exit.\r\nUse recursive to try any four direction, then use an array to save what directions it goes.\r\nIf the way is return true, keep returning true until the start of the recursion.\r\nIf the way is failed. pop out the latest array you push in.\r\nThe next step can't be neither start point nor out of range.\r\n\r\n```javascript=\r\nlet findRoad = function (maze) {\r\n    let road = [];\r\n    helper(maze, road, 0, 0);\r\n    return road;\r\n}\r\n\r\nlet helper = function (maze, road, i, j) {\r\n    if (i == maze.length - 1 && j == maze[i].length - 1) return true;\r\n\r\n    /**\r\n     * i+1 S\r\n     * i-1 N\r\n     * j+1 E\r\n     *j-1 W\r\n     */\r\n\r\n    if (j < maze[i].length - 1 && maze[i][j + 1] !== 0) {\r\n        maze[i][j + 1] = 0;\r\n        road.push(\"E\");\r\n        if (helper(maze, road, i, j + 1) == true) return true;\r\n    }\r\n    if (i < maze.length - 1 && maze[i + 1][j] !== 0) {\r\n        maze[i + 1][j] = 0;\r\n        road.push(\"S\");\r\n        if (helper(maze, road, i + 1, j) == true) return true;\r\n    }\r\n    if (i > 0 && maze[i - 1][j] !== 0 && !(i == 1 && j == 0)) {\r\n        maze[i - 1][j] = 0;\r\n        road.push(\"N\");\r\n        if (helper(maze, road, i - 1, j) == true) return true;\r\n    }\r\n    if (j > 0 && maze[i][j - 1] !== 0 && !(i == 0 && j == 1)) {\r\n        maze[i][j - 1] = 0;\r\n        road.push(\"W\");\r\n        if (helper(maze, road, i, j - 1) == true) return true;\r\n    }\r\n    road.pop();\r\n}\r\n\r\nlet maze = [\r\n    [1, 1, 1, 1, 1],\r\n    [0, 1, 0, 0, 1],\r\n    [0, 1, 0, 0, 1],\r\n    [0, 0, 1, 0, 1],\r\n    [0, 0, 1, 1, 1],\r\n]\r\nlet maze2 = [\r\n    [1, 1, 1, 0, 1],\r\n    [0, 1, 0, 0, 1],\r\n    [0, 1, 1, 0, 1],\r\n    [0, 0, 1, 0, 1],\r\n    [0, 0, 1, 1, 1],\r\n];\r\nlet maze3 = [\r\n    [1, 1, 1, 1, 1],\r\n    [1, 0, 0, 0, 0],\r\n    [1, 0, 1, 1, 1],\r\n    [1, 0, 1, 0, 1],\r\n    [1, 1, 1, 0, 1],\r\n];\r\nlet maze4 = [\r\n    [1, 0, 0, 0, 1],\r\n    [1, 1, 1, 0, 0],\r\n    [1, 0, 1, 0, 1],\r\n    [1, 0, 1, 0, 1],\r\n    [1, 0, 1, 1, 1],\r\n];\r\nconsole.log(findRoad(maze));\r\nconsole.log(findRoad(maze2));\r\nconsole.log(findRoad(maze3));\r\nconsole.log(findRoad(maze4));\r\n```\r\n\r\n<h1>迴圈</h1>\r\n使用array紀錄走過的路，然後用String紀錄方向\r\n起點先設為0(代表走過了)\r\n判斷四個方向中不是0的路，走過去時用array紀錄「走之前的座標」，並用String紀錄剛剛的方向，然後把「現在要走的座標」設為0代表走過了。\r\n當走到終點時把迴圈break掉\r\n如果走到死路了，因為有用array紀錄剛剛的路，所以可以回到上一個點，String也要把剛剛最後紀錄的方向刪掉。\r\n最後印出String就是答案了\r\n\r\n<h1>Iteration </h1>\r\nUse an array to record the road it just went, then use a string to record the directions.\r\nThe start point is set to 0.\r\nGoing four diections which is not 0, use array to record the position before go, then use string to record the direction. Remeber to set the point to 0, means it has passed this way.\r\nTo break the loop if it arrive the end.\r\nIf there's no way to go, use the latest item in array, then delete the latest char in String.\r\n\r\nPrint out the String, which is the answer.\r\n\r\n```javascript=\r\nlet findRoad = function (maze) {\r\n    return helper(maze, 0, 0);\r\n}\r\n\r\nlet helper = function (maze, i, j) {\r\n    let road = [];\r\n    let roadStr = \"\";\r\n    maze[0][0] = 0;\r\n    while (true) {\r\n        if(i === maze.length - 1 && j  === maze[i].length - 1) break;\r\n        if (i < maze.length - 1 && maze[i + 1][j] !== 0) {\r\n            road.push([i, j]);\r\n            roadStr += \"S\";\r\n            maze[i + 1][j] = 0;\r\n            i++;\r\n        } else if (i > 0 && maze[i - 1][j] !== 0) {\r\n            road.push([i, j]);\r\n            roadStr += \"N\";\r\n            maze[i - 1][j] = 0;\r\n            i--;\r\n        } else if (j < maze[i].length - 1 && maze[i][j + 1] !== 0) {\r\n            road.push([i, j]);\r\n            roadStr += \"E\";\r\n            maze[i][j + 1] = 0;\r\n            j++;\r\n        } else if (j > 0 && maze[i][j - 1] !== 0) {\r\n            road.push([i, j]);\r\n            roadStr += \"W\";\r\n            maze[i][j - 1] = 0;\r\n            j--;\r\n        } else {\r\n            let tmp = road.pop();\r\n            i = tmp[0];\r\n            j = tmp[1];\r\n            roadStr = roadStr.substring(0, roadStr.length - 1);\r\n        }\r\n    }\r\n    return roadStr;\r\n}\r\n\r\nlet maze = [\r\n    [1, 1, 1, 1, 1],\r\n    [0, 1, 0, 0, 1],\r\n    [0, 1, 0, 0, 1],\r\n    [0, 0, 1, 0, 1],\r\n    [0, 0, 1, 1, 1],\r\n]\r\nlet maze2 = [\r\n    [1, 1, 1, 0, 1],\r\n    [0, 1, 0, 0, 1],\r\n    [0, 1, 1, 0, 1],\r\n    [0, 0, 1, 0, 1],\r\n    [0, 0, 1, 1, 1],\r\n];\r\nlet maze3 = [\r\n    [1, 1, 1, 1, 1],\r\n    [1, 0, 0, 0, 0],\r\n    [1, 0, 1, 1, 1],\r\n    [1, 0, 1, 0, 1],\r\n    [1, 1, 1, 0, 1],\r\n];\r\nlet maze4 = [\r\n    [1, 0, 0, 0, 1],\r\n    [1, 1, 1, 0, 0],\r\n    [1, 0, 1, 0, 1],\r\n    [1, 0, 1, 0, 1],\r\n    [1, 0, 1, 1, 1],\r\n];\r\nlet maze5 = [\r\n    [1, 0, 1, 1, 1],\r\n    [1, 1, 1, 0, 1],\r\n    [0, 0, 1, 0, 1],\r\n    [0, 1, 1, 0, 1],\r\n    [1, 1, 0, 0, 1],\r\n];\r\nconsole.log(findRoad(maze));\r\nconsole.log(findRoad(maze2));\r\nconsole.log(findRoad(maze3));\r\nconsole.log(findRoad(maze4));\r\nconsole.log(findRoad(maze5));\r\n```",
      "data": {
        "title": "Maze find a way out with Javascript ( Recursion & Iteration )",
        "date": "2022-10-14 15:38:17",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "maze-find-a-way-out-with-javascript-recursion"
    },
    {
      "content": "the algorithm is reference by https://www.youtube.com/watch?v=WLvU5EQVZqY\r\n```javascript=\r\nfunction TreeNode(val, left, right) {\r\n    this.val = (val === undefined ? 0 : val)\r\n    this.left = (left === undefined ? null : left)\r\n    this.right = (right === undefined ? null : right)\r\n}\r\n\r\nvar order = function (root) {\r\n    if (!root) return [];\r\n    let h = root;\r\n    let ans = [];\r\n    let stack = [];\r\n    let map = new Map();\r\n    do {\r\n        if(h && map.get(h)){\r\n            map.set(h, map.get(h)+1);\r\n        }else if(h){\r\n            map.set(h, 1);\r\n        }\r\n\r\n        if(map.get(h) === 1){ // 1 = preorder, 2 = inorder, 3 = postorder\r\n            ans.push(h);\r\n        }\r\n\r\n        if(!h){\r\n            h = stack.pop();\r\n        }\r\n        else if (h.left !== -1) {\r\n            stack.push(h);\r\n            let b = h.left;\r\n            h.left = -1;\r\n            h = b;\r\n        } else if (h.right !== -1) {\r\n            stack.push(h);\r\n            let b = h.right;\r\n            h.right = -1;\r\n            h = b;\r\n        } else if (h.left === -1 && h.right === -1){\r\n            h = stack.pop();\r\n        }\r\n    } while (stack.length || h === root);\r\n    ans = ans.map(v => v.val);\r\n    return ans;\r\n};\r\n```",
      "data": {
        "title": "Three types of Order in Binary Tree with Javascript ( Iteration )",
        "date": "2022-10-13 17:57:24",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "three-types-of-order-in-binary-tree-with-javascript"
    },
    {
      "content": "- Every node can only have at most 2 children.\r\n\r\nThis tree is imcompleted because it doesn't have delete function and auto-balance function.\r\n```javascript=\r\nclass Tree {\r\n    constructor(val) {\r\n        this.root = new Heap(val);\r\n    }\r\n    add(val, heap = this.root) {\r\n        if (val >= heap.val) {\r\n            if (heap.right !== null) {\r\n                this.add(val, heap.right);\r\n            } else {\r\n                heap.right = new Heap(val);\r\n            }\r\n        } else {\r\n            if (heap.left !== null) {\r\n                this.add(val, heap.left);\r\n            } else {\r\n                heap.left = new Heap(val);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Heap {\r\n    constructor(val, left, right) {\r\n        this.val = val ? val : null;\r\n        this.left = left ? left : null;\r\n        this.right = right ? right : null;\r\n    }\r\n}\r\n\r\nlet tree = new Tree(5);\r\ntree.add(3);\r\ntree.add(7);\r\ntree.add(8);\r\ntree.add(4);\r\nconsole.log(tree);\r\n```",
      "data": {
        "title": "Javascript instance Binary Tree with simple code",
        "date": "2022-10-11 16:07:31",
        "tags": [],
        "published": false,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "javascript-instance-tree-with-simple-code"
    },
    {
      "content": "```javascript=\r\nclass LinkedList {\r\n\r\n    constructor() {\r\n        this.node = new ListNode(-1);\r\n        this.length = 0;\r\n    }\r\n\r\n    /**\r\n     * Append a new ListNode to this LinkedList\r\n     */\r\n    append(val) {\r\n        let head = this.node;\r\n        while (head.next) {\r\n            head = head.next;\r\n        }\r\n        head.next = new ListNode(val);\r\n        this.length++;\r\n    }\r\n\r\n    /**\r\n     * delete the first item which's value == val\r\n     */\r\n    delete(val) {\r\n        let head = this.node.next;\r\n        let prev = this.node;\r\n        while (head) {\r\n            if (head.val === val) {\r\n                prev.next = head.next;\r\n                this.length--;\r\n                break;\r\n            }\r\n            prev = head;\r\n            head = head.next;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * insert a node after specified position.\r\n     */\r\n    insert(val, index = this.length - 1) {\r\n        if (index > this.length) {\r\n            console.log(`index ${index} is bigger than this list's length ${this.length}.`);\r\n        }\r\n        let count = index + 1;\r\n        let head = this.node;\r\n        while (count !== 0) {\r\n            head = head.next;\r\n            count--;\r\n        }\r\n        head.next = new ListNode(val, head.next);\r\n        this.length++;\r\n    }\r\n\r\n    /**\r\n     * Print all the values in this LinkedList\r\n     */\r\n    print() {\r\n        let head = this.node.next;\r\n        while (head) {\r\n            console.log(head.val);\r\n            head = head.next;\r\n        }\r\n    }\r\n}\r\nclass ListNode {\r\n    constructor(val, next) {\r\n        this.val = val ? val : null;\r\n        this.next = next ? next : null;\r\n    }\r\n}\r\n\r\nlet a = new LinkedList;\r\na.append(1);\r\na.append(2);\r\na.append(3);\r\na.print(); // 1,2,3\r\na.delete(3);\r\na.insert(4, 0);\r\na.insert(5);\r\na.print(); //1, 4, 2, 5\r\nconsole.log(a.length); //4\r\n```\r\n\r\n",
      "data": {
        "title": "Javascript instance LinkedList with simple code",
        "date": "2022-10-11 14:13:55",
        "tags": [
          "program"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "javascript-instance-linkedlist-with-simple-code"
    },
    {
      "content": "用telegram的bot寫了點小工具，\r\n用Webhook的話記得php那邊要這樣接資料\r\n```php=\r\n// Takes raw data from the request\r\n$json = file_get_contents('php://input');\r\n// Converts it into a PHP object\r\n$lastMsg = json_decode($json, true);\r\n```\r\n測試的時候用getUpdates\r\ngetUpdate version\r\n```php=\r\n $url = \"https://api.telegram.org/bot.../getUpdates\";\r\n $s = json_decode(file_get_contents($url), true);\r\n $msgList = [];\r\n foreach ($s['result'] as $v) {\r\n     $msgList[] = $v;\r\n }\r\n $lastMsg = $msgList[count($msgList) - 1];\r\n ```\r\n #用webhook就不能用getUpdates\r\n\r\n 看Webhook有沒有異常，pending_updates不是0的話表示有異常訊息\r\nhttps://api.telegram.org/bot.../getWebhookInfo\r\n\r\n清空pending_updates\r\nhttps://api.telegram.org/bot.../setWebhook?url=webhook_url&drop_pending_updates=true\r\n\r\n啟動webhook\r\nhttps://api.telegram.org/bot.../setWebhook?url=webhook_url\r\n\r\n關閉 webhook\r\nhttps://api.telegram.org/bot.../setWebhook?url=\r\n\r\n希望bot是自己私人用的，就在webhook的php那邊加上判斷來源id的部分\r\n```php=\r\n$allowID = [\r\n    \"ID_1\",\r\n    \"ID_2\"\r\n];\r\nif(!in_array($lastMsg['message']['from']['id'],$allowID)) return false;\r\n```\r\n\r\n因為webhook不太好看有沒有記錄傳進來，所以我用了個資料表專門記錄傳進來的資料\r\n\r\n因為telegram的伺服器會有時差，連db的設定檔可以多這句\r\n```php=\r\n$GLOBALS['pdo']->prepare(\"SET time_zone = 'Asia/Taipei'\");\r\n```\r\n程式內若有用到DateTime()，也可以靠這句改時區\r\n```php=\r\n$dt = new DateTime('now', new DateTimeZone('Asia/Taipei'));\r\n```",
      "data": {
        "title": "Telegram Bot 開發心得",
        "date": "2022-07-25 17:03:49",
        "tags": [
          "program"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "telegram-bot-kai-fa-xin-de"
    },
    {
      "content": "複製到剪貼簿\r\n```javascript=\r\n    <div onclick=\"copy(this)\">text for copying.</div>\r\n    function copy(element) {\r\n        console.log($(element));\r\n        let str = $(element).text();\r\n        navigator.clipboard.writeText(str).then(() =>\r\n            alert(\"copied\");\r\n        );\r\n    };\r\n```\r\n比直接用append更好的產生element的方式\r\n```javascript=\r\nlet option = $(\"<option>\", {\"d-id\":e['id'], text: e['name']});\r\n$(\"#type\").append(option);\r\n```\r\najax範例\r\n```js=\r\n $.ajax({\r\n            url: url,\r\n            data,\r\n            method: \"GET\",\r\n            dataType: \"json\",\r\n        }.done((rs) => {\r\n\r\n        }).fail((rs) => {\r\n\r\n        })\r\n```\r\najax會重複用的話可以變成一個新的function\r\n```js=\r\n    let callAjax = (data, url, method, dataType) => {\r\n        return $.ajax({\r\n            url,\r\n            data,\r\n            method,\r\n            dataType,\r\n        });\r\n    }\r\n    callAjax(data, url, method, dataType).done()...\r\n```\r\n\r\nArray common function\r\n\r\n```javascript=\r\n//add vs delete\r\npush()  pop() //latest element in this array\r\nunshift()  shift() //first element in this array\r\n\r\nsplice(index, nums) //remove the specified position element with multiple amount.\r\n\r\nreverse() //reverse this array.\r\n\r\narr1.concat(arr2) // return a new array with two arrays combination, it won't change neither arr1 nor arr2.\r\n\r\nincludes(val) //return true if array contains this value, else return false\r\n\r\nindexOf(val) //like include, but return the position, or -1\r\n\r\njoin(', ') //print out the element as string, split with argument\r\n```\r\n\r\n",
      "data": {
        "title": "常用的程式碼 - Javascript",
        "date": "2022-07-25 14:31:42",
        "tags": [
          "常用的程式碼"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "chang-yong-de-cheng-shi-ma-javascript"
    },
    {
      "content": "創建新欄位\r\n在TABLE內新增欄位\r\nALTER TABLE 資料表名稱 ADD COLUMN 欄位名稱 形態(長度);\r\nALTER TABLE member ADD COLUMN tg_id int(64) NOT NULL AFTER FB_id, ADD INDEX(tg_id);\r\n在TABLE內新增欄位，欄位必須加入INDEX並且設定DEFAULT值\r\nALTER TABLE 資料表名稱 ADD COLUMN 欄位名稱 形態(長度), ADD INDEX(欄位名稱);\r\n\r\n\r\n刪除所有問號\r\nUPDATE `test` SET `content`= REPLACE(content, '?', '') WHERE `content` LIKE \"%?%\"\r\n\r\n正規表達式\r\nUPDATE `test` SET `msg`=REGEXP_REPLACE(msg,'(.*)( $)','\\\\1') WHERE msg REGEXP '.* $'\r\n\r\n查所有外來鍵\r\nSELECT * FROM information_schema.TABLE_CONSTRAINTS WHERE CONSTRAINT_TYPE = \"FOREIGN KEY\" AND CONSTRAINT_SCHEMA = \"test\"\r\n\r\n叢集+GROUP BY\r\nSELECT name, subject FROM `student`, score GROUP BY name, subject\r\n\r\n範例 拿缺考的學生\r\nSELECT name, subject FROM `student`, score WHERE (subject, name) NOT IN ( SELECT s.subject as subject, c.name as name FROM score s LEFT JOIN student c ON c.id = s.id) GROUP BY name, subject\r\n\r\n排名 DENSE_RANK()\r\nSELECT score, DENSE_RANK() OVER (\r\n    ORDER BY score DESC\r\n) `rank`\r\nFROM Scores ORDER BY score DESC;\r\n\r\n取第二高的薪水，沒有的話顯示null\r\nSELECT CASE WHEN COUNT(b.c) > 0 THEN b.c ELSE null END AS SecondHighestSalary\r\nFROM (SELECT DISTINCT salary as c FROM Employee ORDER BY salary DESC LIMIT 1,1) b;\r\n\r\n//看別人的，優化版\r\nSELECT (CASE \r\n        WHEN (SELECT COUNT(DISTINCT Salary) FROM Employee) < 2 \r\n        THEN NULL \r\n        ELSE (SELECT Salary FROM Employee \r\n              ORDER BY Salary DESC LIMIT 1,1) \r\n        END) AS SecondHighestSalary\r\n\r\n跳過前3筆 OFFSET\r\nSELECT DISTINCT(salary) from Employee order by salary DESC LIMIT 1 OFFSET 3",
      "data": {
        "title": "常用的程式碼 - MySQL",
        "date": "2022-07-13 11:49:01",
        "tags": [
          "常用的程式碼"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "chang-yong-de-cheng-shi-ma-mysql"
    },
    {
      "content": "git add --all :/ 加入所有有修改的檔案\r\n(在根目錄 git add . 是一樣的效果)\r\ngit add -u 檔名有改/刪除的話用這個\r\ngit config --global --list\r\ngit reset HEAD filename 取消git add的檔案\r\ngit stash 暫存目前修改的狀態，然後還原成原本的樣子(untrach的file不會被暫存)\r\ngit stash pop 還原最新一筆stash\r\ngit stash list 列出所有暫存\r\ngit commit -m \"註解\" commit直接下註解",
      "data": {
        "title": "常用的程式碼 - git",
        "date": "2022-07-13 11:42:03",
        "tags": [
          "常用的程式碼"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "chang-yong-de-cheng-shi-ma-git"
    },
    {
      "content": "ps aux|grep master //查所有socket的執行緒\r\nss -nlp|grep 5000 //5000是port 查對應的pid用\r\nkill -15 {pid} 砍pid的程式，會跟著砍子程式，程式當機會砍不掉\r\nkill -9 {pid} 強制砍pid的程式，子程式的父pid會變1\r\nphp server_global_customer.php 可以開socket\r\ncrontab -e 編輯crontab\r\n-l 看crontab\r\n-r 全部刪除\r\n\r\n查檔案\r\nfind . -name \"*.txt\"\r\n\r\nkill -USR1 {pid} 熱重啟(socket主程式修改的話要砍掉重開)\r\ntail -f swoole.log 一直偵測log的最新訊息\r\ntail -f swoole.log | grep \"關鍵字\" 偵測關鍵字\r\ncat swoole.log | grep \"關鍵字\" 印出所有有關鍵字的\r\necho > swoole.log 清空log\r\ncat swoole.log | grep \"關鍵字\" -C 5 印出關鍵字與上下五行\r\ncat swoole.log | grep \"關鍵字\" > text.log 把log寫進text.log\r\n\r\ngit config --global  --list\r\n\r\ngrep -Frnw '.' -e '登入頁面' 目錄中找關鍵字\r\n-F 用簡單的字串查詢\r\n-r recursive\r\n-n 列出Line\r\n-w 字串全部對上才會顯示\r\n\r\nnetstat -tulpn | grep LISTEN 查PORT+PID",
      "data": {
        "title": "常用的程式碼 - 指令",
        "date": "2022-07-13 11:38:45",
        "tags": [
          "常用的程式碼"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "chang-yong-de-cheng-shi-ma-zhi-ling"
    },
    {
      "content": "\r\n```php=\r\n    //SELECT\r\n    Yii::app()->db->createCommand(\"SELECT * FROM test WHERE id = 1\")->queryAll();\r\n    //UPDATE, DELETE, INSERT\r\n    Yii::app()->db->createCommand(\"...\")->execute();\r\n\r\n    //Model Search\r\n    //By Attributes\r\n    $member = Member::model()->findByAttributes(['role' => 1]);\r\n    //Primary key, ex: id = 1\r\n    $member = Member::model()->findByPk(1);\r\n\r\n    //transaction start\r\n    $transaction = Yii::app()->db->beginTransaction();\r\n    //commit\r\n    $transaction->commit();\r\n    //rollback\r\n    $transaction->rollback();\r\n\r\n    //request\r\n    $request = app()->request;\r\n    //GET, default = 1\r\n    $id = $request->getQuery('id', '1');\r\n    //POST\r\n    //is this from post\r\n    if($request->isPostRequest){...}\r\n    //getPost, default = 1\r\n    $id = $request->getPost('id', '1');\r\n\r\n    //dataProvider by array data\r\n    $dataProvider = new CArrayDataProvider($data, [\r\n    'sort' => array(\r\n        'defaultOrder' => 'id ASC',\r\n        'attributes' => array(\r\n            \"id\", \"count\" //可以點擊排序\r\n        )\r\n    ),\r\n]);\r\n\r\n//Criteria\r\n$criteria = new CDbCriteria;\r\n$criteria->addBetweenCondition('t.created_at', $dateStart, $dateEnd);\r\n$dataProvider = new CActiveDataProvider('tablename', [\r\n    'criteria' => $criteria,\r\n    'sort' => array(\r\n        'attributes' => array(\r\n            '*'\r\n        ),\r\n    ),\r\n]);\r\n\r\n```\r\n\r\nModel 配 GridView 要用到FK的時候\r\n在model內命名一個public $var;\r\nmodel的rules的on => search前面加上要查詢的FK\r\n```php=\r\narray('id, content, type', 'safe', 'on' => 'search')\r\n```\r\n1. 在model內有用relations\r\n```php=\r\n$criteria->with = ['orig'];\r\n$criteria->compare('orig.type', $this->type, true);\r\n```\r\n2. 在model內沒有用relations，或其他需要join的時候\r\n```php=\r\n$criteria->join = 'LEFT JOIN member b ON b.id = t.upper';\r\n$criteria->compare('b.username', $this->upper_username, true);\r\n```\r\n在return的地方兩者都需要在attributes內加上排序用\r\n```php=\t\r\nreturn new CActiveDataProvider('ModelName', array(\r\n        'criteria' => $criteria,\r\n        'sort' => array(\r\n            'attributes' => array(\r\n                'type' => array(\r\n                    'asc' => 'orig.type',\r\n                    'desc' => 'orig.type DESC',\r\n                ),\r\n                '*',\r\n            ),\r\n        ),\r\n    ));\r\n```\r\nview的地方\r\n為了可以查詢，要加上name\r\n如果是用relations的話，沒有特別要寫html就不需要value了\r\n```php=\r\n[\r\n    'name' => 'type',\r\n    'type' => 'raw', //value return 的才會變html\r\n    'header' => '類型',\r\n    'headerHtmlOptions' => array(\"class\" => 'span3'),\r\n    'value' => function ($data)\r\n    {\r\n        return \"<h3>\".$data->orig->type.\"</h3>\"\r\n    }\r\n],\r\n```\r\n\r\nview的CGridView直接用relations\r\n```php=\r\n[\r\n    'header' => 'id',\r\n    'value' => '$data->relations->id,\r\n],\r\n```\r\n\r\n用toggle快速改狀態\r\n```php=\r\n\r\n<?php\r\nYii::app()->clientScript->registerCssFile('/include/bootstrap-toggle/css/bootstrap2-toggle.min.css');\r\nYii::app()->clientScript->registerScriptFile('/include/bootstrap-toggle/js/bootstrap2-toggle.min.js');\r\n\r\n//GridView\r\n[\r\n    'header' => '已發送',\r\n    'type' => 'raw',\r\n    'value' => function ($data)\r\n    {\r\n        $check = ($data->paid == 0) ? '' : 'checked';\r\n        return \"<input {$check} class='active-btn' onchange='toggleActive({$data->id})' data-toggle='toggle' data-on='Y' data-off='N' data-onstyle='success' data-offstyle='danger' type='checkbox'>\";\r\n    },\r\n],\r\n?>\r\n<script type=\"text/javascript\">\r\n\t// 修改狀態\r\n\tfunction toggleActive(id) {\r\n\t\t$.ajax({\r\n\t\t    url: \"<?= $this->createUrl('ToggleActive'); ?>\",\r\n\t\t    type: \"POST\",\r\n\t\t    dataType: \"JSON\",\r\n\t\t    data: {\r\n\t\t    \tid:id\r\n\t\t    },\r\n\t\t    success: function (response) {\r\n\t\t        alert((response.status == 1) ? '修改成功' : response.msg);\r\n\t\t    },\r\n\t\t    error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t\t        alert(XMLHttpRequest.readyState + XMLHttpRequest.status + XMLHttpRequest.responseText);\r\n\t\t    },\r\n\t\t});\r\n\t}\r\n</script>\r\n\r\n//controller的部分\r\n<?php\r\n    public function actionToggleActive()\r\n    {\r\n        $request = app()->request;\r\n        if ($request->isPostRequest) {\r\n            try {\r\n                $id = $request->getPost('id');\r\n                if (!isset($id))\r\n                    throw new Exception('Error', 1);\r\n\r\n                $model = Member::model()->findByPk($id);\r\n                if (!$model)\r\n                    throw new Exception('查無資料', 1);\r\n\r\n                $model->status = ($model->status == 0) ? 1 : 0;\r\n                $model->saveAttributes(['status']);\r\n\r\n                echo json_encode([\r\n                    'status' => 1,\r\n                ]);\r\n            } catch (Exception $e) {\r\n                echo json_encode([\r\n                    'status' => 0,\r\n                    'msg' => $e->getMessage(),\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    ?>\r\n```\r\n\r\naccessRule\r\n```php=\r\n<?php\r\n    public function accessRules()\r\n    {\r\n        return array(\r\n            [\r\n                //所有會員\r\n                'allow',\r\n                'actions' => ['a'],\r\n                'users' => ['*'],\r\n            ],\r\n            [\r\n                //登入的會員無法到登入、註冊\r\n                'deny',\r\n                'actions' => ['login', 'register'],\r\n                'users' => ['@'],\r\n                'deniedCallback' => function () {\r\n                    Yii::app()->controller->redirect(['/site/index']);\r\n                },\r\n            ],\r\n            [\r\n                //expression，誰適用於這個規則，配deniedCallback\r\n                'deny',\r\n                'users' => ['@'],\r\n                'expression' => [$this, 'isStatusNotAllowed'],\r\n                'deniedCallback' => function () {\r\n                    Yii::app()->controller->redirect(['/site/index']);\r\n                },\r\n            ],\r\n            [\r\n                //expression，也可用在allow\r\n                'allow',\r\n                'actions' => ['b'],\r\n                'users' => ['@'],\r\n                'expression' => [$this, 'isStatusAllow'],\r\n            ],\r\n            [\r\n                'allow',\r\n                'users' => ['@'],\r\n            ],\r\n            [\r\n                //未登入的會員\r\n                'allow',\r\n                'actions' => ['login', 'register'],\r\n                'users' => ['?'],\r\n            ],\r\n            [\r\n                //deny所有，做安全保障\r\n                'deny',\r\n                'users' => ['*'],\r\n                'deniedCallback' => function () {\r\n                    Yii::app()->controller->redirect(['/site/login']);\r\n                },\r\n            ],\r\n        );\r\n    }\r\n\r\n    protected function isStatusNotAllowed()\r\n    {\r\n        if (app()->user->isGuest) return false;\r\n        $notAllowed = [...];\r\n        $member = Member::model()->findByAttributes(['id' => app()->user->id]);\r\n        return in_array($member->status, $notAllowed);\r\n    }\r\n\r\n    protected function isStatusAllow()\r\n    {\r\n        $member = Member::model()->findByAttributes(['id' => app()->user->id]);\r\n        return !$member->status == Member::STATUS_ALLOW;\r\n    }\r\n?>\r\n```",
      "data": {
        "title": "常用的程式碼 - Yii",
        "date": "2022-07-13 11:37:14",
        "tags": [
          "常用的程式碼"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "chang-yong-de-cheng-shi-ma-yii"
    },
    {
      "content": "\r\n<span class=\"subtitle\">隨筆</span>\r\n有遇過kill -15 PID 結果砍不掉的問題\r\n但是程式整個卡住，無法確定是不是因為程式跑太久，或是有太多連線導致程式無法正常結束\r\n此時就會用kill -9強制結束\r\n但kill -9 無法砍掉子行程，會讓子行程的父PID變成1\r\n如果kill -15不行，就-9把master砍掉，再把底下的子行程用-15砍掉，看能不能全砍\r\n\r\nps -ef | grep webServer 看這隻程式與子行程\r\n所有人 PID 父PID(最大是1) unknown 執行時間 unknown 執行多久 後面參數不確定\r\nps aux | grep master 看所有master",
      "data": {
        "title": "kill -9 v.s. kill -15",
        "date": "2022-07-11 16:43:13",
        "tags": [
          "program"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "kill-9-vs-kill-15"
    },
    {
      "content": "\r\n<h1>PHP</h1>\r\n\r\nDateTime\r\n```php=\r\n//拿現在時間\r\n$dt = new \\DateTime('NOW');\r\n//拿月初 2022-07-01 00:00:00\r\n$dateStart = $dt->format('Y-m-01 00:00:00');\r\n//拿月底 2022-07-31 23:59:59\r\n$dateEnd = $dt->format('Y-m-t 23:59:59');\r\n//拿上個月月初\r\n$dateStart = date('Y-m-01 00:00:00', strtotime('-1 month'));\r\n//拿上個月月底\r\n$dateEnd = date('Y-m-t 23:59:59', strtotime($dateStart));\r\n\r\n//日期轉成星期幾\r\n$day = DayOfWeekToChineseDay(date('w', strtotime($dateStart)));\r\n$dateStartShow = date(\"Y-m-d({$day}) H:i:s\", strtotime($dateStart));\r\n    \r\nfunction DayOfWeekToChineseDay($day)\r\n{\r\n    switch ($day) {\r\n        case \"0\":\r\n            return \"日\";\r\n        case \"1\":\r\n            return \"一\";\r\n        case \"2\":\r\n            return \"二\";\r\n        case \"3\":\r\n            return \"三\";\r\n        case \"4\":\r\n            return \"四\";\r\n        case \"5\":\r\n            return \"五\";\r\n        case \"6\":\r\n            return \"六\";\r\n    }\r\n}\r\n```\r\n\r\n密碼驗證\r\n```php=\r\n// 線上生成的都用這個，很好用\r\n// https://phppasswordhash.com/\r\n// 產生PWD\r\npassword_hash($pwd, PASSWORD_DEFAULT)\r\n// 驗證用\r\npassword_verify($pwd, $hash)，正確回傳true\r\nif (!password_verify($pwd, $hash))\r\n    throw new Exception(\"錯誤\");\r\n```\r\n\r\nArray\r\n```php=\r\n//array_chunk($arr, $len, bool $preserve_keys) 切割陣列內元素成子陣列，preserve_keys = true會保留KEY\r\n$d = [1,2,3,4];\r\nprint_r(array_chunk($d, 2));\r\noutput: [[1,2], [3,4]]\r\n\r\n//implode(\" \", $arr) Array to String connects with needles\r\n$d = [1,2,3,4];\r\nprint_r(implode(\" \", $d));\r\noutput: 1 2 3 4\r\n\r\n//explode(\" \", $str) String to Array split with needles\r\n$s = \"1 2 3 4\";\r\nprint_r(explode(\" \",$s));\r\noutput: [1,2,3,4]\r\n```",
      "data": {
        "title": "常用的程式碼 - PHP",
        "date": "2022-07-07 14:09:00",
        "tags": [
          "常用的程式碼"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "chang-yong-de-cheng-shi-ma-ji-lu"
    },
    {
      "content": "\r\n<span class=\"subtitle\">拿來測CSS方便我寫作 珍香</span>\r\n```php=\r\n$j = 1;\r\n$j += 2;\r\nconsole.log(\"hji\");\r\n```",
      "data": {
        "title": "測試CSS",
        "date": "2022-06-23 15:35:12",
        "tags": [],
        "published": false,
        "hideInList": true,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "ce-shi-css"
    },
    {
      "content": "<span class=\"subtitle\">前言</span> <span class=\"content\">個人隨筆，簡單紀錄一下會用到的時機</span>\r\n\r\n---\r\nSQL = RDBMS，關聯式資料庫\r\nNoSQL 就是相反的非關聯式資料庫\r\n\r\nSQL可以保證資料的完整性，永久性，還可以保證獨一性，對於需要用到有互相關連的資料會比較適合，像是作者跟文章，然後這作者又有自己的設定檔、簡介等等情況，用SQL會比較方便。\r\nSQL的Schema需要先設計好，不然之後要更改的時候如果有資料了會很麻煩，因為資料型態要一樣。\r\n不好用於分散式資料庫，因為不同資料彼此之間可能會有關聯，如果分散在不同資料庫，查詢起來會很麻煩，通常要升級效能的話直接升級伺服器會比較好（vertical scaling）。\r\n\r\nNoSQL的話就像一堆文件存在伺服器內，每個文件的資料格式不用一樣，目前還沒有遇到會想使用NoSQL的情況，用於分散式資料庫會比較方便（horizontal scaling），畢竟都是存文件，也不會需要注意一致性跟完整性的問題，所以與其升級一台主機的效能，不如多開幾台幫忙存就好了。",
      "data": {
        "title": "SQL vs NoSQL",
        "date": "2022-06-23 15:03:57",
        "tags": [
          "program"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "sql-vs-nosql"
    }
  ],
  "tags": [
    {
      "name": "javascript",
      "slug": "fQfrV7sv2",
      "used": true
    },
    {
      "name": "leetcode",
      "slug": "IPziRV_tR",
      "used": true
    },
    {
      "index": -1,
      "name": "常用的程式碼",
      "slug": "nXMUqZgXX",
      "used": true
    },
    {
      "index": -1,
      "name": "program",
      "slug": "hBJuzNhU4",
      "used": true
    }
  ],
  "menus": [
    {
      "link": "/",
      "name": "Index",
      "openType": "Internal"
    },
    {
      "link": "/archives",
      "name": "Archives",
      "openType": "Internal"
    },
    {
      "link": "/tags",
      "name": "Tags",
      "openType": "Internal"
    }
  ]
}